<%= render 'layouts/navbar_manage_events' %>


<div class="container">
  <!-- timerange selector ( This Week - Next Week ) -->
  <div class="row text-center mt-3">
    <div class="col-2"></div>
    <div class="col-8">
      <ul class="nav nav-pills justify-content-center" role="tablist" id="searchTab">
        <li class="nav-item">
          <a class="schedule week-toggle mr-1 ml-1 active" id="day-tab" href="#day" data-toggle="pill" role="tab" aria-controls="day" aria-selected="true"><%= Date.today.strftime('%a /%d') %></a>
        </li>
        <p> - </p>
        <li class="nav-item">
          <a class="schedule week-toggle mr-1 ml-1" id="day1-tab" href="#day1" data-toggle="pill" role="tab" aria-controls="day1" aria-selected="false"><%= (Date.today+1).strftime('%a /%d') %></a>
        </li>
      </ul>
    </div>
    <div class="col-2"></div>
  </div>
  <div class="tab-content clearfix">
    <div class="tab-pane active mb-4" id="day" role="tabpanel" aria-labelledby="day-tab">
      <% if @events.empty?  %>
        <div class="row text-center mt-4 mb-4">
          <div class="col"></div>
          <div class="col"><span class="schedule date"> No classes this week </span></div>
          <div class="col"></div>
        </div>
      <% else %>
        <% $previous_date = 0 %>
        <% @events.each do |event| %>
            <% if event.date != @previous_date %>
              <div class="row mt-4">
                <div class="col">
                  <span class="schedule date"><%= event.date.strftime('%a %_m/%-d') %><br/></span>
                </div>
              </div>
              <% @previous_date = event.date %>
            <% end %>
            <div class="row text-center">
              <div class="col-1"></div>
              <div class="col"><span class="schedule time"><%= event.start_time.strftime('%l:%M%p') %></span></div>
              <div class="col"><span class="schedule session-name"><%= event.title %></span></div>
              <div class="col"><span class="schedule studio-name"><%= event.location %></span></div>
              <div class="col-1"></div>
            </div>
        <% end %>
      <% end %>
    </div>
    <div class="tab-pane mb-4" id="day1" role="tabpanel" aria-labelledby="day1-tab">
      <% if @events.empty?   %>
      <div class="row text-center mt-4 mb-4">
        <div class="col"></div>
        <div class="col"><span class="schedule date"> No classes this week </span></div>
        <div class="col"></div>
      </div>
      <% else %>
        <% $previous_date = 0 %>
        <% @events.each do |event| %>
          <% if event.date != @previous_date %>
            <div class="row mt-4">
              <div class="col">
                <h4 class="schedule date"><%= event.date.strftime('%a %_m/%-d') %><br/></h4>
              </div>
            </div>
            <% @previous_date = event.date %>
          <% end %>
          <div class="row text-center">
            <div class="col-1"></div>
            <div class="col"><h4 class="schedule time"><%= event.start_time.strftime('%l:%M%p') %></h4></div>
            <div class="col"><h4 class="schedule session-name"><%= event.title %></h4></div>
            <div class="col"><h4 class="schedule studio-name"><%= event.location %></h4></div>
            <div class="col-1"></div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
  <!-- display timerange schedule -->

  <div class="row text-center mt-5 mb-3">
    <div class="col"></div>
    <div class="col-5">
      <% if current_user && current_user == @user %>
        <%= link_to "Add a Class", new_event_url,  class: "btn btn-primary mt-5 mb-5" %>
      <% end %>
    </div>
    <div class="col"></div>
  </div>
</div>
