<% if !current_user %>
  <%= render 'layouts/logged_out' %>
<% else %>
  <%= render 'layouts/navbar_profile' %>
  <%= render 'layouts/navbar_secondary' %>

  <div class="container">
    <div class="row my-2 text-center">
      <div class="col-12">
        <% if @user.avatar.attachment.nil? %>
          <%= image_tag('user.svg', class:'btn-block')%>
        <% else %>
          <%= image_tag(@user.avatar.service_url, class:'btn-block')%>
        <% end %>
      </div>
    </div>

    <div class="row my-1 text-center">
      <div class="col-1"></div>
      <div class="col-1"></div>
      <div class="col-8"> ● ○ ○ </div>
      <div class="col-1">
        <% if current_user == @user %>
          <%= link_to image_tag('edit.png', height: 11, width: 11, class:''), user_edit_bio_url(@user) %>
        <% end %>
      </div>
      <div class="col-1"></div>
    </div>
  </div>

  <div class="container">
    <div class="row mb-2 mx-1">
      <div class="col-12"><h3>About Me</h3></div>
    </div>
    <div class="row mb-2 mx-2">
      <div class="col-12"><p><%= @user.bio %></p></div>
    </div>

    <% if !@practices.empty? || !@specialties.empty? %>
      <hr>
      <!-- <div class="color-bottom-border my-2"></div> -->
    <% end %>
    <% if !@practices.empty? %>
      <div class="bio-category my-3">
        <div class="row mb-2">
          <div class="col-12"><h3>I teach</h3></div>
        </div>
        <div class="row">
          <div class="col-12">
            <ul>
              <% @practices.each do |practice| %>
                <li><p><%= practice.practice_category.name %></p></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    <% end %>
    <% if !@specialties.empty? %>
      <div class="bio-category my-3">
        <div class="row mb-2">
          <div class="col-12"><h3>I focus on</h3></div>
        </div>
        <div class="row">
          <div class="col-12">
            <ul>
              <% @specialties.each do |specialty| %>
                <li><p><%= specialty.specialty_category.name %></p></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    <% end %>

    <% if !@milestones.empty? %>
      <hr>
      <!-- <div class="color-bottom-border mt-3 mb-3"></div> -->
      <div class="timeline my-3">
        <div class="row mb-2">
          <div class="col-12"><h3>Certifications & Experience</h3></div>
        </div>
          <% @milestones.each do |milestone| %>
            <div class="row">
              <div class="col-1">○</div>
              <div class="col-2"><p><%= milestone.year %></p></div>
              <div class="col-7"><p><%= milestone.milestone %></p></div>
              <div class="col-1"><!-- if verified, display checkmark --></div>
            </div>
          <% end %>
      </div>
    <% end %>
  </div>

  <% if current_user.role == 0 %>
    <%= render 'layouts/footer_trainee' %>
  <% elsif current_user.role == 1 %>
    <%= render 'layouts/footer_trainer' %>
  <% end %>
<% end %>
